@model Cliente
@{
    ViewData["Title"] = "Cadastrar Cliente";
}

<div class="text-center">

    <p class="display-6">Cadastrar Cliente</p>
    <br />
</div>

<form class="row mb-3" asp-controller="Clientes" asp-action="Criar" method="post">

    <div class="row mb-3">
        <label for="nome" class="col-sm-2 col-form-label">Nome</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="nome" asp-for="Nome" placeholder="Insira o nome">
        </div>
    </div>

    <div class="row mb-3">
        <label for="cpfCliente" class="col-sm-2 col-form-label">CPF</label>
        <div class="col-sm-10">
            <input type="number" asp-for="CPF" class="form-control" placeholder="Insira o CPF">
        </div>
    </div>

    <div class="row mb-3">
        <label for="telefoneCliente" class="col-sm-2 col-form-label">Telefone</label>
        <div class="col-sm-10">
            <input type="any" asp-for="Telefone" class="form-control" placeholder="Insira o telefone">
        </div>
    </div>

    <div class="row mb-3">
        <label for="cepCliente" class="col-sm-2 col-form-label">CEP</label>
        <div class="col-sm-10">
            <input type="text" id="cepCliente" class="form-control" placeholder="Insira o CEP">
        </div>
    </div>


    <div class="row mb-3">
        <label for="enderecoCliente" class="col-sm-2 col-form-label">Endereço</label>
        <div class="col-sm-10">
            <input type="any" asp-for="Endereco" id="enderecoCliente"  class="form-control" placeholder="Insira o endereço">
        </div>
    </div>


    <div>
        <button type="submit" class="btn btn-primary">Cadastrar Cliente</button>
        <a class="btn btn-primary" asp-controller="Clientes" asp-action="Index">Voltar</a>
    </div>
</form>
@section Scripts{
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#cepCliente').on('change', function () {
                var cep = $(this).val().replace(/\D/g, '');
                if (cep.length === 8) {
                    $.getJSON(`https://viacep.com.br/ws/${cep}/json/`, function (data) {
                        if (!data.erro) {
                            $('#enderecoCliente').val(data.logradouro + ', ' + data.bairro + ', ' + data.localidade + ', ' + data.uf);
                        }
                    });
                }
            });
        });
    </script>

    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
                    }